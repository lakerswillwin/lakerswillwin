<!DOCTYPE html>
<html 
	lang="CH-zh">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		
<link rel="stylesheet" href="/css/layout.css">

		
		<title> 面向对象程序设计 -  Laneのhome</title>
		<!-- <link rel="stylesheet" href="https://unpkg.com/mdui@1.0.2/dist/css/mdui.min.css" /> -->
		<!-- <script src="https://unpkg.com/mdui@1.0.2/dist/js/mdui.min.js"></script> -->
		
<link rel="stylesheet" href="/lib/mdui/mdui.min.css">

		
<script src="/lib/mdui/mdui.min.js"></script>

		<!-- lazyload -->
		
<script src="/lib/lazysizes.js"></script>

		<!-- smooth-scrolling -->
		
<script src="/lib/smooth-scrolling.js"></script>

		<!-- highlight -->
		
<link rel="stylesheet" href="/lib/highlight/atom-one-dark.min.css">

		
<script src="/lib/highlight/highlight.min.js"></script>

		<!-- 预置 kiraicon -->
		
<link rel="stylesheet" href="/lib/iconfont/iconfont.css">

		
		<link
			rel="shortcut icon"
			href="https://kira.host/assets/Pictures/Others/116359b4ccf19917.jpg"
			type="image/png"
		/>
		
<link rel="stylesheet" href="/deps/css/APlayer.min.css">

		
			
				
<link rel="stylesheet" href="/style.css">

			
		
		
<script src="/deps/js/APlayer.min.js"></script>
<script src="/deps/js/Meting.min.js"></script>

	<meta name="generator" content="Hexo 6.3.0"></head>

	<body>
		<div
			class="kira-background"
			style="background-image: url('https://s21.ax1x.com/2024/08/08/pkzljdH.jpg')"
		></div>
		<div class="kira-header">
    <a
        class="kira-drawer-button mdui-ripple"
        title="导航栏"
        onclick="document.querySelector('.kira-sidebar-modal').classList.add('show');document.querySelector('.kira-sidebar#sidebar').classList.add('show');"
    >
        <i class="kirafont icon-menu"></i>
    </a>
    <a href="/" title="Laneのhome">
        <img
			src="https://s21.ax1x.com/2024/08/08/pkzljdH.jpg"
			alt="Lane"
		/>
    </a>
</div>
		<div class="kira-body">
			<div class="kira-sidebar" id="sidebar">
	<div class="kira-avatar mdui-ripple">
		<a target="_blank" rel="noopener" href="https://s21.ax1x.com/2024/08/08/pkzljdH.jpg" title="Lane">
			<img
				src="https://s21.ax1x.com/2024/08/08/pkzljdH.jpg"
				alt="Lane"
			/>
		</a>
	</div>
	<div class="kira-count">
		<div><span>文章</span>31</div>
		<div><span>标签</span>16</div>
		<div><span>分类</span>7</div>
	</div>
	<div class="kira-list">
		
		<a
			class="kira-list-item mdui-ripple false"
			href="/index/index.html"
			title="指路楼"
		>
			<i
				class="kirafont
					
						icon-home
					"
			></i>
			<div class="kira-list-item-content">
				指路楼
			</div>
		</a>
		
		<a
			class="kira-list-item mdui-ripple false"
			href="/archive.html"
			title="文章归档"
		>
			<i
				class="kirafont
					
						icon-container
					"
			></i>
			<div class="kira-list-item-content">
				文章归档
			</div>
		</a>
		
		<a
			class="kira-list-item mdui-ripple false"
			href="/about/about.html"
			title="本人"
		>
			<i
				class="kirafont
					
						icon-user
					"
			></i>
			<div class="kira-list-item-content">
				本人
			</div>
		</a>
		
		<a
			class="kira-list-item mdui-ripple false"
			href="/friends.html"
			title="友链"
		>
			<i
				class="kirafont
					
						icon-team
					"
			></i>
			<div class="kira-list-item-content">
				友链
			</div>
		</a>
		
		<a
			class="kira-list-item mdui-ripple false"
			href="/todolist/index.html"
			title="todolist"
		>
			<i
				class="kirafont
					
						icon-unordered-list
					"
			></i>
			<div class="kira-list-item-content">
				todolist
			</div>
		</a>
		
	</div>
	<aside id="kira-sidebar">
		
			<div class="kira-widget-wrap">
	<div class="kira-widget kira-social">
		
			<a
				class="mdui-ripple"
				href="https://wx.mail.qq.com/home/index?sid=zRxMToxhT2suJFZaALhEUwAA#/list/1/1"
				target="_blank"
				mdui-tooltip="{content: 'QQ'}"
				style="color: rgb(49, 174, 255); background-color: rgba(49, 174, 255, .1);"
			>
				<i
					class="kirafont
					
						icon-QQ
					"
				></i>
			</a>
		
			<a
				class="mdui-ripple"
				href="https://space.bilibili.com/3537107830179843?spm_id_from=333.1007.0.0"
				target="_blank"
				mdui-tooltip="{content: '哔哩哔哩'}"
				style="color: rgb(231, 106, 141); background-color: rgba(231, 106, 141, .15);"
			>
				<i
					class="kirafont
					
						icon-bilibili
					"
				></i>
			</a>
		
			<a
				class="mdui-ripple"
				href="https://github.com/lakerswillwin/"
				target="_blank"
				mdui-tooltip="{content: 'GitHub'}"
				style="color: rgb(25, 23, 23); background-color: rgba(25, 23, 23, .15);"
			>
				<i
					class="kirafont
					
						icon-github
					"
				></i>
			</a>
		
			<a
				class="mdui-ripple"
				href="/null"
				target="_blank"
				mdui-tooltip="{content: 'Gitee'}"
				style="color: rgb(165, 15, 15); background-color: rgba(165, 15, 15, .15);"
			>
				<i
					class="kirafont
					
						icon-gitee
					"
				></i>
			</a>
		
	</div>
</div>

		
			
  <div class="kira-widget-wrap">
    <h3 class="kira-widget-title">分类</h3>
    <div class="kira-widget">
      <ul class="category-list">
        
        

        
          <li class="category-list-item">
            <a class="category-list-link" href="/categories/cs课程/">
              cs课程
            </a>
            <span class="category-list-count">14</span>
          </li>
        
          <li class="category-list-item">
            <a class="category-list-link" href="/categories/思政课/">
              思政课
            </a>
            <span class="category-list-count">1</span>
          </li>
        
          <li class="category-list-item">
            <a class="category-list-link" href="/categories/技术/">
              技术
            </a>
            <span class="category-list-count">8</span>
          </li>
        
          <li class="category-list-item">
            <a class="category-list-link" href="/categories/数理课程/">
              数理课程
            </a>
            <span class="category-list-count">4</span>
          </li>
        
          <li class="category-list-item">
            <a class="category-list-link" href="/categories/科研训练/">
              科研训练
            </a>
            <span class="category-list-count">1</span>
          </li>
        
          <li class="category-list-item">
            <a class="category-list-link" href="/categories/课程经验/">
              课程经验
            </a>
            <span class="category-list-count">1</span>
          </li>
        
          <li class="category-list-item">
            <a class="category-list-link" href="/categories/随笔/">
              随笔
            </a>
            <span class="category-list-count">2</span>
          </li>
        
      </ul>
    </div>
  </div>

		
			
	<div class="kira-widget-wrap">
		<div id="randomtagcloud" class="kira-widget tagcloud kira-rainbow">
			<a href="/tags/C/" style="font-size: 20px;">C</a> <a href="/tags/C/" style="font-size: 15px;">C++</a> <a href="/tags/ai/" style="font-size: 10px;">ai</a> <a href="/tags/c/" style="font-size: 10px;">c</a> <a href="/tags/java/" style="font-size: 10px;">java</a> <a href="/tags/latex/" style="font-size: 10px;">latex</a> <a href="/tags/math/" style="font-size: 15px;">math</a> <a href="/tags/nihao/" style="font-size: 10px;">nihao</a> <a href="/tags/physics/" style="font-size: 10px;">physics</a> <a href="/tags/python/" style="font-size: 20px;">python</a> <a href="/tags/shell/" style="font-size: 10px;">shell</a> <a href="/tags/%E5%BB%BA%E7%AB%99/" style="font-size: 10px;">建站</a> <a href="/tags/%E6%80%9D%E6%94%BF/" style="font-size: 10px;">思政</a> <a href="/tags/%E7%A1%AC%E4%BB%B6/" style="font-size: 15px;">硬件</a> <a href="/tags/%E7%A7%91%E7%A0%94/" style="font-size: 10px;">科研</a> <a href="/tags/%E7%BB%8F%E9%AA%8C/" style="font-size: 10px;">经验</a>
		</div>
		
	</div>


		
			
	<div class="kira-widget-wrap">
		<h3 class="kira-widget-title">
			文章归档
		</h3>
		<div class="kira-widget">
			<ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/">2025</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/">2024</a><span class="archive-list-count">23</span></li></ul>
		</div>
	</div>


		
	</aside>
	<div class="kira-copyright">
		&copy; 2025
		<a href="/">Lane</a>
		Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> &
		<a href="https://github.com/ch1ny/kira-hexo/" target="_blank">Kira-Hexo</a>
		<br />
		
		<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<center> 浏览量：<span id="busuanzi_value_site_pv"><i class="fa fa-spinner fa-spin"></i></span>| 访客数：<span id="busuanzi_value_site_uv"><i class="fa fa-spinner fa-spin"></i></span> </center>
	</div>
</div>
<div
	class="kira-sidebar-modal"
	id="sidebar-modal"
	onclick="(function(self) {
		self.classList.remove('show');
		document.querySelector('.kira-sidebar.show#sidebar').classList.remove('show');
	})(this)"
></div>
			<div class="kira-content">
				<div id="kira-top-header"></div>
				<div class="kira-main-content">
					
<link rel="stylesheet" href="/css/kira-image.css">


<script src="/js/kira-image.js"></script>

<div class="kira-image">
    <div class="kira-image-modal">
        <div class="kira-image-header">
            <div class="kira-image-counter"></div>
            <div class="kira-image-title"></div>
            <div class="kira-image-operation">
                <div class="kira-image-operation-button" id="kira-image-operation-button-zoom">
                    <i class="kirafont icon-zoom-in"></i>
                </div>
                <div class="kira-image-operation-button" id="kira-image-operation-button-close">
                    <i class="kirafont icon-close"></i>
                </div>
            </div>
        </div>
        <div class="kira-image-container">
            <div class="kira-image-prev-button-panel">
                <div class="kira-image-exchange-button">
                    <i class="kirafont icon-left"></i>
                </div>
            </div>
            <div class="kira-image-list">
                <div class="kira-image-prev">
                    <img />
                </div>
                <div class="kira-image-now">
                    <img />
                </div>
                <div class="kira-image-next">
                    <img />
                </div>
            </div>
            <div class="kira-image-next-button-panel">
                <div class="kira-image-exchange-button">
                    <i class="kirafont icon-right"></i>
                </div>
            </div>
        </div>
    </div>
</div>

	
<link rel="stylesheet" href="/css/kira-code-copy.css">

	
<script src="/js/kira-code-copy.js"></script>


<div class="kira-post">
	<article>
		
		<div class="kira-post-cover">
			<img
				data-src="https://s21.ax1x.com/2025/01/14/pEiFTpQ.jpg"
				data-sizes="auto"
				alt="面向对象程序设计"
				class="lazyload kira-post-cover-image disabled-kira-image"
			/>
			<h1>面向对象程序设计</h1>
		</div>
		
		<div class="kira-post-meta kira-rainbow" style="margin:10px 0!important;">
			<a><i class="kirafont icon-calendar-fill"></i>2025年01月14日</a>
			<a><i class="kirafont icon-edit-fill"></i>7.9k 字</a>
			<a><i class="kirafont icon-time-circle-fill"></i>大概 40 分钟</a>
		</div>
		<h2><span id="导航">导航</span></h2><ul>
<li><a href="#%E5%AF%BC%E8%88%AA">导航</a></li>
<li><a href="#week-1">week 1</a><ul>
<li><a href="#c%E7%9A%84%E4%BB%8B%E7%BB%8D">C++的介绍</a><ul>
<li><a href="#the-first-c-programme">the first c++ programme</a></li>
<li><a href="#read-input">read input</a></li>
</ul>
</li>
<li><a href="#using-objects">Using Objects</a><ul>
<li><a href="#the-string-class">The string class</a></li>
<li><a href="#file-io">File I&#x2F;O</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#week-2">week 2</a><ul>
<li><a href="#a-quick-tour-of-c">A Quick Tour of C++</a></li>
</ul>
</li>
<li><a href="#week-3">week 3</a><ul>
<li><a href="#stl">STL</a><ul>
<li><a href="#what-is-stl">What is STL</a></li>
<li><a href="#why-should-i-use-stl">Why should I use STL</a></li>
<li><a href="#containers">Containers</a></li>
<li><a href="#algorithms">Algorithms</a></li>
<li><a href="#iterators">iterators</a></li>
<li><a href="#pitfalls">pitfalls</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#week-4">week 4</a><ul>
<li><a href="#memory-model">memory model</a><ul>
<li><a href="#what-are-these-variables">what are these variables?</a></li>
<li><a href="#%E5%88%86%E9%85%8D%E4%BD%8D%E7%BD%AE">分配位置</a></li>
<li><a href="#%E4%B8%8D%E5%90%8C%E7%9A%84%E5%8F%98%E9%87%8F%E4%BB%8B%E7%BB%8D">不同的变量介绍</a></li>
<li><a href="#%E6%8C%87%E9%92%88">指针</a></li>
</ul>
</li>
<li><a href="#reference">Reference</a><ul>
<li><a href="#defining-references">Defining references</a></li>
<li><a href="#rules-of-references">Rules of references</a></li>
<li><a href="#type-restrictions">Type restrictions</a></li>
</ul>
</li>
<li><a href="#dynamically-allocated-memory">Dynamically allocated memory</a><ul>
<li><a href="#dynamic-memory-allocation">Dynamic memory allocation</a></li>
</ul>
</li>
<li><a href="#const">const</a></li>
</ul>
</li>
<li><a href="#week-5--class">week 5–class</a><ul>
<li><a href="#class">class</a></li>
<li><a href="#objects">objects</a></li>
<li><a href="#object-vs-class">object vs class</a></li>
<li><a href="#%E7%BC%96%E8%AF%91%E5%8D%95%E5%85%83">编译单元</a></li>
<li><a href="#%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0">构造函数</a></li>
<li><a href="#struct%E4%B8%AD%E7%9A%84%E9%9D%99%E6%80%81%E5%8F%98%E9%87%8F">struct中的静态变量</a></li>
<li><a href="#inline%E5%87%BD%E6%95%B0">inline函数</a></li>
</ul>
</li>
<li><a href="#week6--composition-and-inheritance">week6–composition and inheritance</a><ul>
<li><a href="#composition">composition</a><ul>
<li><a href="#%E7%BB%84%E5%90%88%E7%9A%84%E6%A6%82%E5%BF%B5">组合的概念</a></li>
</ul>
</li>
<li><a href="#inheritance">inheritance</a><ul>
<li><a href="#%E7%BB%A7%E6%89%BF%E7%9A%84%E6%A6%82%E5%BF%B5">继承的概念</a></li>
<li><a href="#%E7%BB%A7%E6%89%BF%E7%9A%84%E4%BC%98%E5%8A%BF">继承的优势</a></li>
<li><a href="#%E7%BB%A7%E6%89%BF%E7%9A%84%E7%A4%BA%E4%BE%8B%E4%BB%A5%E5%8F%8A%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6">继承的示例以及访问控制</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#week8">week8</a><ul>
<li><a href="#%E6%8B%B7%E8%B4%9D%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E4%B8%8E%E8%B5%8B%E5%80%BC%E5%87%BD%E6%95%B0">拷贝构造函数与赋值函数</a></li>
<li><a href="#%E5%9C%A8%E5%AE%B9%E5%99%A8%E4%B8%AD%E7%9A%84%E6%8B%B7%E8%B4%9D%E5%87%BD%E6%95%B0">在容器中的拷贝函数</a></li>
</ul>
</li>
<li><a href="#homework-explanation">homework explanation</a><ul>
<li><a href="#hw35">hw3.5</a></li>
<li><a href="#hw45">hw4.5</a></li>
</ul>
</li>
</ul>
<h2><span id="week-1">week 1</span></h2><h3><span id="c的介绍">C++的介绍</span></h3><h4><span id="the-first-c-programme">the first c++ programme</span></h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta"># <span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    cout &lt;&lt;<span class="hljs-string">&quot;Hello,World! I am &quot;</span>&lt;&lt; <span class="hljs-number">18</span><br>         &lt;&lt;<span class="hljs-string">&quot; Today!&quot;</span>&lt;&lt; endl;<span class="hljs-comment">//endl理解为回车</span><br>         <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<ul>
<li>注意：一般规范书写还是要返回</li>
</ul>
<h4><span id="read-input">read input</span></h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    cout &lt;&lt; <span class="hljs-string">&quot;Please enter your age: &quot;</span>;<br>    <span class="hljs-type">int</span> age;<br>    cin &gt;&gt; age;<br>    cout &lt;&lt; <span class="hljs-string">&quot;Hello ,World! I am&quot;</span> &lt;&lt; age &lt;&lt;<span class="hljs-string">&quot; years old!&quot;</span>&lt;&lt; endl;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3><span id="using-objects">Using Objects</span></h3><h4><span id="the-string-class">The string class</span></h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><br><span class="hljs-comment">//在程序的开头引用头文件</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span><br><span class="hljs-comment">//定义string变量</span><br>string str;<br><span class="hljs-comment">//初始化</span><br>string str = <span class="hljs-string">&quot;Hello&quot;</span>;<br><span class="hljs-comment">//读和写</span><br>cin &gt;&gt; str;<br>cout  &lt;&lt; str;<br><span class="hljs-comment">//assignment</span><br><span class="hljs-type">char</span> cstr1[<span class="hljs-number">20</span>];<br><span class="hljs-type">char</span> cstr2[<span class="hljs-number">20</span>]=<span class="hljs-string">&quot;jaguar&quot;</span>;<br>string str1;<br>string str2= <span class="hljs-string">&quot;panther&quot;</span>;<br>cstr1=cstr2;<span class="hljs-comment">//非法</span><br>str1= str2; <span class="hljs-comment">//合法</span><br><span class="hljs-comment">//Concatenation</span><br>string str3;<br>str3= str1+ str2;<br>str1+=str2;<br>str1+= <span class="hljs-string">&quot;a string literal&quot;</span>;<br><span class="hljs-comment">// constructors(Ctors)</span><br><span class="hljs-built_in">string</span> (<span class="hljs-type">const</span> <span class="hljs-type">char</span> *cp, <span class="hljs-type">int</span> len);<br><span class="hljs-built_in">string</span> (<span class="hljs-type">const</span> string&amp; s2, <span class="hljs-type">int</span> pos);<br><span class="hljs-built_in">string</span> (<span class="hljs-type">const</span> string&amp; s2, <span class="hljs-type">int</span> pos ,<span class="hljs-type">int</span> len);<br><span class="hljs-comment">// sub-string</span><br><span class="hljs-built_in">substr</span>(<span class="hljs-type">int</span> pos ,<span class="hljs-type">int</span> len);<br><span class="hljs-comment">//Modification</span><br><span class="hljs-built_in">assign</span>(...);<br><span class="hljs-built_in">insert</span>(...);<br><span class="hljs-built_in">insert</span>(<span class="hljs-type">int</span> pos,<span class="hljs-type">const</span> string&amp; s);<br><span class="hljs-built_in">erase</span>(...);<br><span class="hljs-built_in">append</span>(...);<br><span class="hljs-built_in">replace</span>(...);<br><span class="hljs-built_in">replace</span> (<span class="hljs-type">int</span> pos, <span class="hljs-type">int</span> len,<span class="hljs-type">const</span> string&amp; s);<br><span class="hljs-comment">//search</span><br><span class="hljs-built_in">find</span> (<span class="hljs-type">const</span> string&amp; s);<br><br></code></pre></td></tr></table></figure>

<blockquote>
<p>string class 的应用</p>
</blockquote>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    string str1=<span class="hljs-string">&quot;foo&quot;</span>;<br>    string str2=<span class="hljs-string">&quot;bar&quot;</span>;<br>    string str3=str1+str2;<br>    cout &lt;&lt;<span class="hljs-string">&quot;str3 = &quot;</span>&lt;&lt;str3 &lt;&lt;endl;<br>    str2+=str1;<br>    cout &lt;&lt;<span class="hljs-string">&quot;str2 = &quot;</span>&lt;&lt;str2 &lt;&lt; endl;<br><br>    str3 = <span class="hljs-string">&quot;hello, china!&quot;</span>;<br>    <span class="hljs-function">string <span class="hljs-title">str4</span><span class="hljs-params">(<span class="hljs-string">&quot;hello, zju!&quot;</span>)</span></span>;<br>    <span class="hljs-comment">//两种初始化方式</span><br>    <span class="hljs-function">string <span class="hljs-title">str5</span><span class="hljs-params">(str3)</span></span>;<span class="hljs-comment">//拷贝构造</span><br>    <span class="hljs-function">string <span class="hljs-title">str6</span><span class="hljs-params">(str3, <span class="hljs-number">7</span>, <span class="hljs-number">5</span>)</span></span>;<span class="hljs-comment">//从str的第7个字符开始，长度为5本质上与成员函数substr功能一致</span><br>    cout &lt;&lt;<span class="hljs-string">&quot;str4 = &quot;</span>&lt;&lt;str4 &lt;&lt;endl;<br>    cout &lt;&lt;<span class="hljs-string">&quot;str5 = &quot;</span>&lt;&lt;str5 &lt;&lt;endl;<br>    cout &lt;&lt;<span class="hljs-string">&quot;str6 = &quot;</span>&lt;&lt;str6 &lt;&lt;endl;<br><br>    string str7 =str3.<span class="hljs-built_in">substr</span>(<span class="hljs-number">7</span>,<span class="hljs-number">5</span>);<br>    cout &lt;&lt;<span class="hljs-string">&quot;str7 = &quot;</span> &lt;&lt; str7 &lt;&lt; endl;<br>    string str8 = str3;<br>    str8.<span class="hljs-built_in">replace</span>(<span class="hljs-number">7</span>,<span class="hljs-number">5</span>,<span class="hljs-string">&quot;hangzhou&quot;</span>);<br>    cout &lt;&lt;<span class="hljs-string">&quot;str8 = &quot;</span>&lt;&lt; str8 &lt;&lt;endl;<br><br>    str8.<span class="hljs-built_in">assign</span>(<span class="hljs-number">10</span>, <span class="hljs-string">&#x27;A&#x27;</span>);<br>    cout &lt;&lt;<span class="hljs-string">&quot;str8 = &quot;</span>&lt;&lt; str8 &lt;&lt;endl;<br><br>    string str9 = <span class="hljs-string">&quot;hello, hangzhou city&quot;</span>;<br>    cout &lt;&lt; <span class="hljs-string">&quot;str9 = &quot;</span> &lt;&lt; str9 &lt;&lt; endl;<br>    string str_to_find = <span class="hljs-string">&quot;hangzhou&quot;</span>;<br>    cout &lt;&lt; str9.<span class="hljs-built_in">find</span>(str_to_find) &lt;&lt; endl;<br>    str9.<span class="hljs-built_in">replace</span>(str9.<span class="hljs-built_in">find</span>(str_to_find),str_to_find.<span class="hljs-built_in">length</span>(),<span class="hljs-string">&quot;beijing&quot;</span>);<br>    cout &lt;&lt;<span class="hljs-string">&quot;str9 = &quot;</span>&lt;&lt; str9 &lt;&lt;endl;<br>&#125;<br></code></pre></td></tr></table></figure>

<h4><span id="file-ix2fo">File I&#x2F;O</span></h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;ifstream&gt;</span> <span class="hljs-comment">//read from file</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;ofstream&gt;</span> <span class="hljs-comment">//write to file</span></span><br><br><span class="hljs-function">ofstream <span class="hljs-title">File1</span><span class="hljs-params">(<span class="hljs-string">&quot;C:\\test.txt&quot;</span>)</span></span>;<br>File1 &lt;&lt; <span class="hljs-string">&quot;Hello world&quot;</span> &lt;&lt; std::endl;<br><br><span class="hljs-function">ifstream <span class="hljs-title">File2</span><span class="hljs-params">(<span class="hljs-string">&quot;C:\\test.txt&quot;</span>)</span></span>;<br>std::string str;<br>File2 &gt;&gt; str;<br></code></pre></td></tr></table></figure>

<blockquote>
<p>I&#x2F;O example</p>
</blockquote>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;fstream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    string str1= <span class="hljs-string">&quot;foo, bar!&quot;</span>;<br>    <span class="hljs-function">ofstream <span class="hljs-title">fout</span><span class="hljs-params">(<span class="hljs-string">&quot;out.txt&quot;</span>)</span></span>;<br>    fout &lt;&lt; str1 &lt;&lt; endl;<br><br>    <span class="hljs-function">ifstream <span class="hljs-title">fin</span><span class="hljs-params">(<span class="hljs-string">&quot;out.txt&quot;</span>)</span></span>;<br>    string str2, str3;<br>    fin &gt;&gt; str2 &gt;&gt; str3;<br>    cout &lt;&lt; <span class="hljs-string">&quot;str2= &quot;</span> &lt;&lt; str2 &lt;&lt; endl;<br>    cout &lt;&lt; <span class="hljs-string">&quot;str3= &quot;</span> &lt;&lt; str3 &lt;&lt; endl;<br>&#125;<br></code></pre></td></tr></table></figure>

<blockquote>
<p>regex example(替换字符)</p>
</blockquote>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;regex&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    string s =<span class="hljs-string">&quot;hello,student@zju!&quot;</span>;<br>    <span class="hljs-function">regex <span class="hljs-title">re</span><span class="hljs-params">(<span class="hljs-string">&quot;a|e|i|o|u&quot;</span>)</span></span>;<br>    string s1 = <span class="hljs-built_in">regex_replace</span>(s,re,<span class="hljs-string">&quot;*&quot;</span>);<br>    cout &lt;&lt; s &lt;&lt; <span class="hljs-string">&quot;\n&quot;</span> &lt;&lt; s1 &lt;&lt; <span class="hljs-string">&quot;\n&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<h2><span id="week-2">week 2</span></h2><h3><span id="a-quick-tour-of-c">A Quick Tour of C++</span></h3><ul>
<li>这一节课cx老师通过介绍排序算法引出c++中的模板、自定义类、类的继承，快速介绍了c++中的几个性质（cx老师也说如果这一节课的每个步骤完全弄懂，这门课不用来听了<del>bushi</del>）</li>
<li>首先用c++写了选择排序的程序，和C语言大差不差</li>
<li>以下的例子介绍了C++中的在函数定义中显式声明模板参数。这样我们对于不同的变量类型都可以适用。</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;string&gt;</span></span><br><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">min_element</span><span class="hljs-params">(T arr[],<span class="hljs-type">int</span> begin,<span class="hljs-type">int</span> end)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> min_idx=begin;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=begin+<span class="hljs-number">1</span>;i&lt;end;i++)<br>    &#123;<br>        <span class="hljs-keyword">if</span>(arr[i]&lt;arr[min_idx])<br>          min_idx=i;<br>    &#125;<br>    <span class="hljs-keyword">return</span> min_idx;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">swap</span><span class="hljs-params">(T a,T b)</span></span><br><span class="hljs-function"></span>&#123;<br>    T temp=a;<br>    a=b;<br>    b=temp;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">selection_sort</span><span class="hljs-params">(T arr[],<span class="hljs-type">int</span> n)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n;i++)<br>    &#123;<br>        <span class="hljs-type">int</span> min_idx=<span class="hljs-built_in">min_element</span>(arr,i,n);<br>        <span class="hljs-keyword">if</span>(min_idx!=i)<br>          <span class="hljs-built_in">swap</span>(arr[min_idx],arr[i]);<br>    &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">print_array</span><span class="hljs-params">(T arr[],<span class="hljs-type">int</span> n)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n;i++)<br>    &#123;<br>        std::cout &lt;&lt;arr[i] &lt;&lt; <span class="hljs-string">&#x27; &#x27;</span>;<br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    std::string arr[]=&#123;<span class="hljs-string">&quot;hello&quot;</span>,<span class="hljs-string">&quot;boys&quot;</span>,<span class="hljs-string">&quot;and&quot;</span>,<span class="hljs-string">&quot;girls&quot;</span>,<span class="hljs-string">&quot;zju&quot;</span>&#125;;<br>    <span class="hljs-type">int</span> n=<span class="hljs-built_in">sizeof</span>(arr)/<span class="hljs-built_in">sizeof</span>(arr[<span class="hljs-number">0</span>]);<br>    <span class="hljs-built_in">selection_sort</span>(arr,n);<br>    <span class="hljs-built_in">print_array</span>(arr,n);<br>&#125;<br></code></pre></td></tr></table></figure>

<ul>
<li><p>设计结构体来排序</p>
<ol>
<li>引用传递(&amp;):直接访问原始对象，这样能方便我们不额外开辟一个空间，直接修改原始对象。（当然对于常量变量并不会修改原始对象）</li>
<li>值传递：会额外开辟一个原始对象的副本。</li>
<li>对于我们的选择排序对于我们自定义的变量，我们需要自己定义我们的比较规则与输出规则。</li>
</ol>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">student</span>&#123;<br>  <span class="hljs-type">int</span> id;<br>  std::string name;<br>   &#125;;<br> <span class="hljs-type">bool</span> <span class="hljs-keyword">operator</span>&lt;(<span class="hljs-type">const</span> student &amp;s1,<span class="hljs-type">const</span> student &amp;s2)&#123;<br>      <span class="hljs-keyword">return</span> s1.id&lt;s2.id;<br>  &#125;<br>  std::ostream &amp;<span class="hljs-keyword">operator</span>&lt;&lt;(std::ostream&amp;out,<span class="hljs-type">const</span> student&amp; s)<br>  &#123;<br>  <span class="hljs-keyword">return</span> out &lt;&lt; <span class="hljs-string">&quot;(&quot;</span>&lt;&lt;s.id&lt;&lt;<span class="hljs-string">&quot;,&quot;</span>&lt;&lt;s.name&lt;&lt;<span class="hljs-string">&quot;)&quot;</span>;<br>  &#125;<br></code></pre></td></tr></table></figure>
</li>
<li><p>引入自定义类,class(其中类里面的字段为private)，而前面的结构体其实本质上的字段是public，所以我们在main函数中对class进行初始化程序会报错。这就涉及到我们在自定义类构造函数。</p>
</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Triangle</span>&#123;<br>    <span class="hljs-keyword">private</span>:<br>      <span class="hljs-type">double</span> a,b,c;<br>      <span class="hljs-type">double</span> area, perimeter;<br>    <span class="hljs-keyword">public</span>:<br>      <span class="hljs-built_in">Triangle</span>(<span class="hljs-type">double</span> a,<span class="hljs-type">double</span> b,<span class="hljs-type">double</span> c):<span class="hljs-built_in">a</span>(a),<span class="hljs-built_in">b</span>(b),<span class="hljs-built_in">c</span>(c) &#123;&#125;<br>      <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">calc_area</span><span class="hljs-params">()</span></span>&#123;<br>        <span class="hljs-type">double</span> p=(a+b+c)/<span class="hljs-number">2</span>;<br>        area=<span class="hljs-built_in">sqrt</span>(p*(p-a)*(p-b)*(p-c));<br>      &#125;<br>      <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">calc_perimeter</span><span class="hljs-params">()</span></span>&#123;<br>        perimeter=a+b+c;<br>      &#125;<br>&#125;;<br><span class="hljs-comment">//初始化时</span><br>Triangle arr3[]=&#123;<span class="hljs-built_in">Triangle</span>(<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>),<span class="hljs-built_in">Triangle</span>(<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>)&#125;;<br></code></pre></td></tr></table></figure>

<ul>
<li>我们思考是否有一个抽象类，类似于前面的抽象类型来管理多个性质与成员相同的类。这就涉及c++的继承<ol>
<li>注意抽象类的定义，抽象类定义为纯虚函数，即没有函数体，只有函数声明，其子类必须实现该函数。子类实现的函数的值存在在抽象类的protected域中。</li>
<li>继承的语法为：class 子类:访问修饰符 父类{};</li>
<li>子类实现父类的纯虚函数时，子类必须使用override关键字来修饰。</li>
</ol>
</li>
<li>此时在main函数中我们通常涉及指针数组来方便操作对象</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Shape</span>&#123;<br><span class="hljs-keyword">protected</span>:<br>  <span class="hljs-type">double</span> area,perimeter;<br><span class="hljs-keyword">public</span>:<br>  <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">calc_area</span><span class="hljs-params">()</span></span>=<span class="hljs-number">0</span>;<br>  <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">calc_perimeter</span><span class="hljs-params">()</span></span>=<span class="hljs-number">0</span>;<br>&#125;;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Rectangle</span>:<span class="hljs-keyword">public</span> Shape&#123;<br>    <span class="hljs-keyword">private</span>:<br>      <span class="hljs-type">double</span> w,h;<br>     <span class="hljs-comment">// double area, perimeter;</span><br>    <span class="hljs-keyword">public</span>:<br>      <span class="hljs-built_in">Rectangle</span>(<span class="hljs-type">double</span> w,<span class="hljs-type">double</span> h):<span class="hljs-built_in">w</span>(w),<span class="hljs-built_in">h</span>(h) &#123;&#125;<br>      <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">calc_area</span><span class="hljs-params">()</span> <span class="hljs-keyword">override</span> </span>&#123;<br>        area= w*h;<br>      &#125;<br>      <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">calc_perimeter</span><span class="hljs-params">()</span> <span class="hljs-keyword">override</span> </span>&#123;<br>        perimeter=<span class="hljs-number">2</span>*(w+h);<br>      &#125;<br>&#125;;<br><span class="hljs-comment">//main函数调用</span><br>Shape* arr[]=&#123;<span class="hljs-keyword">new</span> <span class="hljs-built_in">Rectangle</span>(<span class="hljs-number">2</span>,<span class="hljs-number">3</span>),<span class="hljs-keyword">new</span> <span class="hljs-built_in">Rectangle</span>(<span class="hljs-number">5</span>,<span class="hljs-number">5</span>),<span class="hljs-keyword">new</span> <span class="hljs-built_in">Circle</span>(<span class="hljs-number">3</span>),<span class="hljs-keyword">new</span> <span class="hljs-built_in">Triangle</span>(<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>)&#125;;<br><span class="hljs-keyword">for</span> (Shape* s:arr)<br>    &#123;<br>        s-&gt;<span class="hljs-built_in">calc_area</span>();<br>        s-&gt;<span class="hljs-built_in">calc_perimeter</span>();<br>    &#125;<br></code></pre></td></tr></table></figure>

<ul>
<li>我们又仿照前面的结构体,按照下面的代码想要输出我们刚刚得到的结果，但是发现无法访问area和perimeter。因为我们的shape类的成员变量area和perimeter是protected的，所以无法访问。</li>
<li>我们可以在Shape类中定义一个输出函数并采取friend字段。</li>
<li>我们却发现输出的流却像地址,我们回到我们的打印的模板，此时的T其实是Shape*，所以此时的arr的类型就是指针，所以输出的流便是地址。</li>
<li>我们可以额外再写一个T抽象函数专门针对指针类型</li>
<li>我们继续前进：修改shape类，添加一个虚拟函数，想要输出每个类的名字，同时每个子类都实现这个函数。但是我们会发现程序报错：<ol>
<li>因为我们输出函数中的Shape变量前有const修饰，说明我们不能改变它的状态，所以我们在输出函数中调用name()函数是不可行的。</li>
<li>我们想要解决需要在shape类中对name()函数用const修饰。显式告诉编译器我们在函数中不会改变状态。</li>
</ol>
</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs cpp">std:: ostream &amp;<span class="hljs-keyword">operator</span> &lt;&lt;(std::ostream&amp; out,<span class="hljs-type">const</span> Shape&amp; s)<br>&#123;<br>  <span class="hljs-keyword">return</span> out &lt;&lt;<span class="hljs-string">&quot;(&quot;</span>&lt;&lt;s.area&lt;&lt;<span class="hljs-string">&quot;,&quot;</span>&lt;&lt;s.perimeter&lt;&lt;<span class="hljs-string">&quot;)&quot;</span>;<br>&#125;<br><span class="hljs-comment">//修改shape类</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Shape</span>&#123;<br><span class="hljs-keyword">protected</span>:<br>  <span class="hljs-type">double</span> area,perimeter;<br><span class="hljs-keyword">public</span>:<br>  <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">calc_area</span><span class="hljs-params">()</span></span>=<span class="hljs-number">0</span>;<br>  <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">calc_perimeter</span><span class="hljs-params">()</span></span>=<span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">friend</span> std:: ostream &amp;<span class="hljs-keyword">operator</span> &lt;&lt;(std::ostream&amp; out,<span class="hljs-type">const</span> Shape&amp;);<br>&#125;;<br><span class="hljs-comment">//添加print函数</span><br><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">print_array</span><span class="hljs-params">(T* arr[],<span class="hljs-type">int</span> n)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n;i++)<br>    &#123;<br>        std::cout &lt;&lt; *arr[i] &lt;&lt; <span class="hljs-string">&#x27; &#x27;</span>;<br>    &#125;<br>&#125;<br><span class="hljs-comment">//shape类中添加虚拟函数</span><br> <span class="hljs-function"><span class="hljs-keyword">virtual</span> std::string <span class="hljs-title">name</span><span class="hljs-params">()</span></span>=<span class="hljs-number">0</span>;<br> <span class="hljs-comment">//同时输出流也改变一下</span><br> std:: ostream&amp; <span class="hljs-keyword">operator</span> &lt;&lt;(std :: ostream&amp; out,<span class="hljs-type">const</span> Shape &amp; s )<br> &#123;<br>    <span class="hljs-keyword">return</span> out &lt;&lt;<span class="hljs-string">&quot;(&quot;</span>&lt;&lt;s.<span class="hljs-built_in">name</span>()&lt;&lt;<span class="hljs-string">&quot;,&quot;</span>&lt;&lt;s.area&lt;&lt;<span class="hljs-string">&quot;,&quot;</span>&lt;&lt;s.perimeter&lt;&lt;<span class="hljs-string">&quot;)&quot;</span><br> &#125;<br><span class="hljs-comment">//修改虚拟函数以及各个子类实现的函数</span><br><span class="hljs-keyword">virtual</span> std::string <span class="hljs-built_in">name</span>() <span class="hljs-type">const</span>=<span class="hljs-number">0</span>;<br>std:: <span class="hljs-function">string <span class="hljs-title">name</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> <span class="hljs-keyword">override</span></span>&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Rectangle&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<ul>
<li>我们再回到这堂课的最初出发点：selection sort，我们现在想要根据面积和周长分别进行排序，那这样我们需要添加一个selection_sort函数和find_min函数，因为此时我们的接口多了一个自定义的比较函数。<ol>
<li>在这里需要注意的是我们的自定义的比较函数不能直接访问Shape类的成员变量，我们需要在Shape类中定义get函数。</li>
<li>其实当我们定义好get函数后，我们可以将Shape类中的freind修饰的输出函数删除，我们的输出函数可以通过调用get函数而不需要访问Shape类的成员变量。</li>
</ol>
</li>
<li>除了单独书写一个比较函数，我们还可以在主函数调用时直接在主函数中传入比较函数。</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">//扩充的选择排序</span><br><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T,<span class="hljs-keyword">typename</span> Compare&gt;</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">min_element</span><span class="hljs-params">(T arr[],<span class="hljs-type">int</span> begin,<span class="hljs-type">int</span> end,Compare comp)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> min_idx=begin;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=begin+<span class="hljs-number">1</span>;i&lt;end;i++)<br>    &#123;<br>        <span class="hljs-keyword">if</span>(<span class="hljs-built_in">comp</span>(arr[i],arr[min_idx]))<br>          min_idx=i;<br>    &#125;<br>    <span class="hljs-keyword">return</span> min_idx;<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T,<span class="hljs-keyword">typename</span> Compare&gt;</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">selection_sort</span><span class="hljs-params">(T arr[],<span class="hljs-type">int</span> n,Compare comp)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n;i++)<br>    &#123;<br>        <span class="hljs-type">int</span> min_idx=<span class="hljs-built_in">min_element</span>(arr,i,n,comp);<br>        <span class="hljs-keyword">if</span>(min_idx!=i)<br>          <span class="hljs-built_in">swap</span>(arr[min_idx],arr[i]);<br>    &#125;<br>&#125;<br><span class="hljs-comment">//我们自定义的比较函数与修改的父类</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Shape</span>&#123;<br><span class="hljs-keyword">protected</span>:<br>  <span class="hljs-type">double</span> area,perimeter;<br><span class="hljs-keyword">public</span>:<br>  <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">calc_area</span><span class="hljs-params">()</span></span>=<span class="hljs-number">0</span>;<br>  <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">calc_perimeter</span><span class="hljs-params">()</span></span>=<span class="hljs-number">0</span>;<br>  <span class="hljs-function"><span class="hljs-keyword">virtual</span> std::string <span class="hljs-title">name</span><span class="hljs-params">()</span> <span class="hljs-type">const</span></span>=<span class="hljs-number">0</span>;<br>  <span class="hljs-keyword">friend</span> std:: ostream &amp;<span class="hljs-keyword">operator</span> &lt;&lt;(std::ostream&amp; out,<span class="hljs-type">const</span> Shape&amp;);<br>  <span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">get_area</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>&#123;<span class="hljs-keyword">return</span> area;&#125;<br>  <span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">get_perimeter</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>&#123;<span class="hljs-keyword">return</span> perimeter;&#125;<br>&#125;;<br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">less_shape_area</span><span class="hljs-params">(Shape * s1,Shape * s2)</span></span><br><span class="hljs-function"></span>&#123;<br>   <span class="hljs-keyword">return</span> s1-&gt;<span class="hljs-built_in">get_area</span>()&lt;s2-&gt;<span class="hljs-built_in">get_area</span>();<br>&#125;<br><span class="hljs-comment">//直接传入比较函数</span><br><span class="hljs-built_in">selection_sort</span>(arr,n,[](Shape* s1,Shape* s2)&#123;<span class="hljs-keyword">return</span> s1-&gt;<span class="hljs-built_in">get_area</span>()&lt;s2-&gt;<span class="hljs-built_in">get_area</span>();&#125;)<br></code></pre></td></tr></table></figure>

<h2><span id="week-3">week 3</span></h2><h3><span id="stl">STL</span></h3><h4><span id="what-is-stl">What is STL</span></h4><ul>
<li>C++的标准模板库的一部分</li>
<li>封装C++的数据结构与算法</li>
<li>包含：<ol>
<li>容器：class templates，common data structures</li>
<li>算法</li>
<li>迭代器：泛化的指针，在容器与算法间打交道</li>
</ol>
</li>
</ul>
<h4><span id="why-should-i-use-stl">Why should I use STL</span></h4><ul>
<li>节省时间与工作量</li>
<li>增加程序可读性</li>
</ul>
<h4><span id="containers">Containers</span></h4><ul>
<li>线性容器<ol>
<li>array(static),vector(dynamic)</li>
<li>deque(double-ended queue)</li>
<li>forward_list(signlely linked list),list(doubly linked list)</li>
</ol>
</li>
<li>关联性容器(本质上是用红黑树)<ol>
<li>set(collection of unique keys)</li>
<li>map(collection of key-value pairs)</li>
<li>multiset,multimap</li>
</ol>
</li>
<li>Unordered associative<ol>
<li>hashed by keys</li>
<li>unordered_set,unordered_map</li>
<li>unordered_multiset,unordered_multimap</li>
</ol>
</li>
<li>Adaptors<ol>
<li>stack</li>
<li>queue</li>
<li>priority_queue</li>
</ol>
</li>
</ul>
<blockquote>
<p>vector example</p>
</blockquote>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>   <span class="hljs-comment">//初始化</span><br>   vector&lt;<span class="hljs-type">int</span>&gt; evens &#123;<span class="hljs-number">2</span>,<span class="hljs-number">4</span>,<span class="hljs-number">6</span>,<span class="hljs-number">8</span>&#125;;<br>   <span class="hljs-comment">//push_back</span><br>   evens.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">20</span>);<br>   evens.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">22</span>);<br>   <span class="hljs-comment">//insert,在指定位置插入5个10</span><br>   evens.<span class="hljs-built_in">insert</span>(evens.<span class="hljs-built_in">begin</span>()+<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">10</span>);<br>   <span class="hljs-comment">//四种遍历方式,但是如果想要在指定范围内输出我们需要使用迭代器</span><br>   <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;evens.<span class="hljs-built_in">size</span>();i++)<br>     cout &lt;&lt; evens[i] &lt;&lt;<span class="hljs-string">&quot; &quot;</span>;<br>    cout&lt;&lt; endl;<br>    <span class="hljs-keyword">for</span> (vector&lt;<span class="hljs-type">int</span>&gt; :: iterator it = evens.<span class="hljs-built_in">begin</span>();it &lt; evens.<span class="hljs-built_in">end</span>();it++)<br>      cout &lt;&lt; *it &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>    cout&lt;&lt; endl;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">auto</span> it = evens.<span class="hljs-built_in">begin</span>();it &lt; evens.<span class="hljs-built_in">end</span>();it++)<br>      cout &lt;&lt; *it &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>    cout &lt;&lt; endl;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> e : evens)<br>      cout &lt;&lt; e &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>    cout&lt;&lt; endl;<br>&#125;<br></code></pre></td></tr></table></figure>

<blockquote>
<p>other containers</p>
</blockquote>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta"># <span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;list&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;map&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-comment">//list</span><br>    list &lt;string&gt; s;<br>    s.<span class="hljs-built_in">push_back</span>(<span class="hljs-string">&quot;hello&quot;</span>);<br>    s.<span class="hljs-built_in">push_back</span>(<span class="hljs-string">&quot;world&quot;</span>);<br>    s.<span class="hljs-built_in">push_back</span>(<span class="hljs-string">&quot;stl&quot;</span>);<br><br>    list &lt;string&gt;::iterator p;<br>    <span class="hljs-comment">//需要注意的是我们遍历的时候用!=,因为我们的内存是分散的，比较迭代器的地址没有意义</span><br>    <span class="hljs-keyword">for</span>(p=s.<span class="hljs-built_in">begin</span>();p!=s.<span class="hljs-built_in">end</span>();p++)<br>      cout &lt;&lt; *p &lt;&lt;<span class="hljs-string">&quot; &quot;</span>;<br>    cout &lt;&lt; endl;<br><br>    <span class="hljs-comment">//map</span><br>    map&lt;string,<span class="hljs-type">int</span>&gt; price_list;<br>    price_list[<span class="hljs-string">&quot;apple&quot;</span>]=<span class="hljs-number">3</span>;<br>    price_list[<span class="hljs-string">&quot;orange&quot;</span>]=<span class="hljs-number">5</span>;<br>    price_list[<span class="hljs-string">&quot;banana&quot;</span>]=<span class="hljs-number">1</span>;<br>    <br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span> &amp; pair:price_list)<br>      cout&lt;&lt; <span class="hljs-string">&quot;&#123;&quot;</span> &lt;&lt; pair.first&lt;&lt;<span class="hljs-string">&quot;:&quot;</span>&lt;&lt;pair.second&lt;&lt;<span class="hljs-string">&quot;&#125;&quot;</span>&lt;&lt;<span class="hljs-string">&quot; &quot;</span>;<br>    cout&lt;&lt;endl;<br><br>    string item;<br>    <span class="hljs-type">double</span> total=<span class="hljs-number">0</span>;<br>    <span class="hljs-comment">//如果输入的item在前面并不存在，我们会发现值会被悄悄插进map去且赋值为零</span><br>    <span class="hljs-comment">/*while(cin&gt;&gt;item)</span><br><span class="hljs-comment">      total+=price_list[item];</span><br><span class="hljs-comment">      */</span><br>    <span class="hljs-comment">//注意我们使用的contains在编译时要使用c++20</span><br>    <span class="hljs-keyword">while</span>(cin&gt;&gt;item)<br>    &#123;<br>        <span class="hljs-keyword">if</span>(price_list.<span class="hljs-built_in">contains</span>(item))<br>           total+=price_list[item];<br>        <span class="hljs-keyword">else</span><br>          cout&lt;&lt;<span class="hljs-string">&quot;Mistake&quot;</span>&lt;&lt;endl;<br>    &#125;<br>    cout &lt;&lt; total &lt;&lt;endl;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span> &amp; pair:price_list)<br>      cout&lt;&lt; <span class="hljs-string">&quot;&#123;&quot;</span> &lt;&lt; pair.first&lt;&lt;<span class="hljs-string">&quot;:&quot;</span>&lt;&lt;pair.second&lt;&lt;<span class="hljs-string">&quot;&#125;&quot;</span>&lt;&lt;<span class="hljs-string">&quot; &quot;</span>;<br>    cout&lt;&lt;endl;<br><br>    <span class="hljs-comment">//再举一个例子</span><br>    map&lt;string,<span class="hljs-type">int</span>&gt; word_map;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span> &amp; w : &#123;<span class="hljs-string">&quot;we&quot;</span>,<span class="hljs-string">&quot;are&quot;</span>,<span class="hljs-string">&quot;not&quot;</span>,<span class="hljs-string">&quot;humans&quot;</span>,<span class="hljs-string">&quot;we&quot;</span>,<span class="hljs-string">&quot;are&quot;</span>,<span class="hljs-string">&quot;robots&quot;</span>,<span class="hljs-string">&quot;!!!!&quot;</span>&#125;)<br>         word_map[w]++;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span>&amp; [word,count]:word_map)<br>       cout &lt;&lt; count &lt;&lt;<span class="hljs-string">&quot; occurrence(s) of word&quot;</span>&lt;&lt;word&lt;&lt;endl;<br>   <br><br>&#125;<br></code></pre></td></tr></table></figure>

<h4><span id="algorithms">Algorithms</span></h4><ul>
<li>works on a range defined as [first,last]</li>
<li>for_each,find,count</li>
<li>copy,fill,transform,replace,rotate</li>
<li>sort,partial_sort,nth_element</li>
<li>set_difference,set_union</li>
<li>min_element,max_element</li>
<li>accumulate,partial_sum</li>
</ul>
<blockquote>
<p>ex</p>
</blockquote>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iterator&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;list&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;infix_iterator.h&quot;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    vector&lt;<span class="hljs-type">int</span>&gt; v =&#123;<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">5</span>&#125;;<br>    <span class="hljs-built_in">reverse</span>(v.<span class="hljs-built_in">begin</span>(),v.<span class="hljs-built_in">end</span>());<br>    <span class="hljs-comment">//但是此时u没有东西，程序不知道在哪里开始</span><br>    <span class="hljs-comment">//我们想要在copy时自动插入，我们换一个迭代器</span><br>    vector&lt;<span class="hljs-type">int</span>&gt; u;<br>   <span class="hljs-comment">// copy(v.begin(),v.end(),u.begin());</span><br>   <span class="hljs-built_in">copy</span>(v.<span class="hljs-built_in">begin</span>(),v.<span class="hljs-built_in">end</span>(),<span class="hljs-built_in">back_inserter</span>(u));<br>   <span class="hljs-built_in">copy</span>(u.<span class="hljs-built_in">begin</span>(),u.<span class="hljs-built_in">end</span>(),<span class="hljs-built_in">ostream_iterator</span>&lt;<span class="hljs-type">int</span>&gt;(cout,<span class="hljs-string">&quot;,&quot;</span>));<br>   cout&lt;&lt;endl;<br><br>   list&lt;<span class="hljs-type">int</span>&gt; l;<br>   <span class="hljs-comment">//每次在头部插入，相当于又reversse了一次所以结果与最初相同</span><br>   <span class="hljs-built_in">copy</span>(v.<span class="hljs-built_in">begin</span>(),v.<span class="hljs-built_in">end</span>(),<span class="hljs-built_in">front_inserter</span>(l));<br>   <span class="hljs-built_in">copy</span>(l.<span class="hljs-built_in">begin</span>(),l.<span class="hljs-built_in">end</span>(),<span class="hljs-built_in">ostream_iterator</span>&lt;<span class="hljs-type">int</span>&gt;(cout,<span class="hljs-string">&quot;,&quot;</span>));<br>   cout&lt;&lt;endl;<br>   <span class="hljs-comment">//要注意下面的初始化方式的含义是10个8</span><br>   vector &lt;<span class="hljs-type">int</span>&gt; <span class="hljs-built_in">t</span>(<span class="hljs-number">10</span>,<span class="hljs-number">8</span>);<br>   <span class="hljs-built_in">copy</span>(v.<span class="hljs-built_in">begin</span>(),v.<span class="hljs-built_in">end</span>(),t.<span class="hljs-built_in">begin</span>());<br>   <span class="hljs-built_in">copy</span>(t.<span class="hljs-built_in">begin</span>(),t.<span class="hljs-built_in">end</span>(),<span class="hljs-built_in">ostream_iterator</span>&lt;<span class="hljs-type">int</span>&gt;(cout,<span class="hljs-string">&quot;,&quot;</span>));<br>   <span class="hljs-comment">//想要消掉最后的逗号,可以基于ostream_iterator自己实现一个迭代器</span><br>   <span class="hljs-built_in">copy</span>(t.<span class="hljs-built_in">begin</span>(),t.<span class="hljs-built_in">end</span>(),<span class="hljs-built_in">infix_ostream_iterator</span>&lt;<span class="hljs-type">int</span>&gt;(cout,<span class="hljs-string">&quot;,&quot;</span>));<br>   cout&lt;&lt;endl;<br>&#125;<br></code></pre></td></tr></table></figure>

<h4><span id="iterators">iterators</span></h4><ul>
<li>connect containers and algorithms</li>
<li>后面的课会讲到</li>
</ul>
<h4><span id="pitfalls">pitfalls</span></h4><ul>
<li><p>access safety</p>
<ol>
<li>accessing an element out of range</li>
<li>use push_back() for dynamic expansion</li>
<li>preallocate with constructor</li>
<li>reallocate with resize()</li>
</ol>
</li>
<li><p>silent insertion</p>
<ol>
<li>map&lt;&gt;中如果没有对应的pair，可能悄悄添加</li>
<li>通常用count() or contains()(基于c++20)来检查</li>
</ol>
</li>
<li><p>size() on list&lt;&gt;</p>
<ol>
<li>my_list.size() might cost linear time before C++11</li>
<li>Constant time guaranteed:my_list.empty()</li>
</ol>
</li>
<li><p>invalid iterator</p>
<ol>
<li>using invalid iterator</li>
</ol>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs cpp">list &lt;<span class="hljs-type">int</span>&gt; L;<br>list &lt;<span class="hljs-type">int</span>&gt;:: iterator li;<br>li=L.<span class="hljs-built_in">begin</span>();<br>L.<span class="hljs-built_in">erase</span>(li);<br>++li;<span class="hljs-comment">//wrong</span><br><span class="hljs-comment">//我们需要重新调整</span><br>li=L.<span class="hljs-built_in">erase</span>(li);<br></code></pre></td></tr></table></figure></li>
</ul>
<h2><span id="week-4">week 4</span></h2><h3><span id="memory-model">memory model</span></h3><h4><span id="what-are-these-variables">what are these variables?</span></h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-type">int</span> i; <span class="hljs-comment">//global vars</span><br><span class="hljs-type">static</span> <span class="hljs-type">int</span> j; <span class="hljs-comment">//static global vars</span><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">f</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> k; <span class="hljs-comment">//local vars</span><br>    <span class="hljs-type">static</span> <span class="hljs-type">int</span> l; <span class="hljs-comment">//static local vars</span><br><br>    <span class="hljs-type">int</span> *p= <span class="hljs-built_in">malloc</span>(<span class="hljs-built_in">sizeof</span>(<span class="hljs-type">int</span>)); <span class="hljs-comment">//allocated vars</span><br>&#125;<br><span class="hljs-comment">//一个例子</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cstdlib&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-type">int</span> globalx=<span class="hljs-number">100</span>;<br><span class="hljs-comment">//我们可以发现存放的区域的位置</span><br><span class="hljs-comment">//全局变量和静态变量放在一个区域(data/code段)</span><br><span class="hljs-comment">//局部变量放在一个区域（stack）</span><br><span class="hljs-comment">//动态分配的又在一个区域（heap）</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">static</span> <span class="hljs-type">int</span> staticx=<span class="hljs-number">30</span>;<br>    <span class="hljs-type">int</span> localx=<span class="hljs-number">3</span>;<br>    <span class="hljs-type">int</span> *px=(<span class="hljs-type">int</span>*)<span class="hljs-built_in">malloc</span>(<span class="hljs-built_in">sizeof</span>(<span class="hljs-type">int</span>));<br>     cout&lt;&lt;<span class="hljs-string">&quot;&amp;globalx=&quot;</span>&lt;&lt;&amp;globalx&lt;&lt;endl;<br>     cout&lt;&lt;<span class="hljs-string">&quot;&amp;staticx=&quot;</span>&lt;&lt;&amp;staticx&lt;&lt;endl;<br>     cout&lt;&lt;<span class="hljs-string">&quot;&amp;localx=&quot;</span>&lt;&lt;&amp;localx&lt;&lt;endl;<br>     cout&lt;&lt;<span class="hljs-string">&quot;&amp;px=&quot;</span>&lt;&lt;&amp;px&lt;&lt;endl;<br>     cout&lt;&lt;<span class="hljs-string">&quot;px=&quot;</span>&lt;&lt;px&lt;&lt;endl;<br>&#125;<br></code></pre></td></tr></table></figure>

<h4><span id="分配位置">分配位置</span></h4><p><img data-fancybox="gallery" data-sizes="auto" data-src="/./oopphoto/1.png" alt="1" class="lazyload"></p>
<h4><span id="不同的变量介绍">不同的变量介绍</span></h4><ul>
<li>全局变量（global）<ol>
<li>vars defined outside any functions</li>
<li>can be shared btw .cpp files</li>
<li>extern（用其他模块的全局变量,编译时要和定义这个变量的模块一起编译）<br>  3.1 extern is a declaration says there will be such a variable somewhere in the whole program<br>  3.2 “such a” means the type and the name of the variable<br>  3.3 global variable is a definition , the place for that variable</li>
<li>static<br>  4.1 static global variable inhibits access from outside the .cpp file（只有在本模块使用）<br>  4.2 so as the static function<br>  4.3 static local variable keeps value between visits to the same function(存储与全局变量相同，并且第一次调用时初始化)</li>
</ol>
</li>
</ul>
<h4><span id="指针">指针</span></h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cpp">string s =<span class="hljs-string">&quot;hello&quot;</span>;<br>string *ps = &amp;s;<br></code></pre></td></tr></table></figure>

<ul>
<li>operators with pointers<ol>
<li>get address</li>
<li>get the object</li>
<li>call the function</li>
</ol>
</li>
<li>two ways to access<ol>
<li>string s;<br>  1.1 s is the object itself<br>  1.2 at this line,object s is created and initialized</li>
<li>string *ps;<br>  2.1 ps is a pointer to an object<br>  2.2 the object ps points to is not konwn yet</li>
</ol>
</li>
</ul>
<h3><span id="reference">Reference</span></h3><h4><span id="defining-references">Defining references</span></h4><ul>
<li>references are a new data type in C++</li>
<li>type&amp; refname &#x3D;name;<ol>
<li>for ordinary variable definitions</li>
<li>an initial value <strong>is required</strong></li>
</ol>
</li>
<li>type&amp; refname;<ol>
<li>In parameter lists or member variables</li>
<li>Binding defined by caller or constructor</li>
</ol>
</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-type">char</span> c;<span class="hljs-comment">//a character</span><br><span class="hljs-type">char</span>* p = &amp;c;<span class="hljs-comment">//a pointer to a character</span><br><span class="hljs-type">char</span>&amp; r =c;<span class="hljs-comment">//a reference to a character</span><br></code></pre></td></tr></table></figure>

<h4><span id="rules-of-references">Rules of references</span></h4><ul>
<li>引用变量创造时必须初始化</li>
<li>初始化建立了binding，并且不能再重新和另一个变量绑定</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">f</span> <span class="hljs-params">(<span class="hljs-type">int</span>&amp; x)</span></span>;<br><span class="hljs-built_in">f</span>(y);<span class="hljs-comment">//在函数被调用时初始化</span><br></code></pre></td></tr></table></figure>

<ul>
<li>引用变量的本质就是给已经存在的变量多了个名字</li>
<li>non-const的reference不能绑定rvalue，引用的non-const的目标是lvalue（能放在等号左侧的表达式）。</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span> <span class="hljs-params">(<span class="hljs-type">int</span> &amp;)</span></span>;<br><span class="hljs-built_in">func</span>(i*<span class="hljs-number">3</span>);<span class="hljs-comment">//Wrong!!</span><br></code></pre></td></tr></table></figure>

<ul>
<li>悬空引用出现报错，引用必须绑定到生命周期足够长的对象上</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">int</span> &amp;<span class="hljs-title">h</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>  <span class="hljs-type">int</span> q;<br>  <span class="hljs-keyword">return</span> q;<span class="hljs-comment">//error!</span><br>&#125;<br></code></pre></td></tr></table></figure>

<h4><span id="type-restrictions">Type restrictions</span></h4><ul>
<li>No references to references</li>
<li>No pointers to references,but reference to pointer is ok（指针变量是一个健全的类型可以独立存在）</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-type">int</span>&amp; * p;<span class="hljs-comment">//illegal</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">f</span><span class="hljs-params">(<span class="hljs-type">int</span>*&amp; p)</span></span>;<span class="hljs-comment">//ok</span><br></code></pre></td></tr></table></figure>

<ul>
<li>No arrays of references</li>
</ul>
<h3><span id="dynamically-allocated-memory">Dynamically allocated memory</span></h3><h4><span id="dynamic-memory-allocation">Dynamic memory allocation</span></h4><ul>
<li>new expression<br>new int;<br>new Stash;<br>new int[10];</li>
<li>delete expression<br>delete p;<br>delete [] p;</li>
<li>new与malloc的差异在于：new在动态分配内存的同时还通过构造函数初始化对象，我们下面的例子就说明了这点。</li>
<li>同时对于数组的删除，我们可以发现删除的顺序是从后往前删除的。<ol>
<li>注意对于数组的删除采取 delete [] p;但是如果我们写delete p，只能删除第一个元素。</li>
</ol>
</li>
<li>new、delete和malloc、free不能混用。</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cstdlib&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Student</span>&#123;<br>   <span class="hljs-type">int</span> id; <br>   <span class="hljs-comment">//构造函数</span><br>   <span class="hljs-built_in">Student</span>()&#123;<br>    id = <span class="hljs-number">0</span>;<br>    cout &lt;&lt;<span class="hljs-string">&quot;Student::Student()&quot;</span>&lt;&lt;endl;<br>   &#125;<br>   <span class="hljs-comment">//delete时会调用这个函数</span><br>   ~<span class="hljs-built_in">Student</span>()&#123;<br>    cout &lt;&lt;<span class="hljs-string">&quot;Student::~Student()&quot;</span>&lt;&lt;endl;<br>   &#125;<br>&#125;;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> *pa= <span class="hljs-keyword">new</span> <span class="hljs-built_in">int</span>(<span class="hljs-number">1024</span>);<br>    cout &lt;&lt; *pa &lt;&lt; endl;<br>    <span class="hljs-type">int</span> *parr =<span class="hljs-keyword">new</span> <span class="hljs-type">int</span>[<span class="hljs-number">10</span>];<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">10</span>;i++)<br>      parr[i]=i;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">10</span>;i++)<br>      cout &lt;&lt; parr[i] &lt;&lt; endl;<br>      <span class="hljs-keyword">delete</span> pa;<br>      <span class="hljs-keyword">delete</span> [] parr;<br><br>      Student * psl=(Student*)<span class="hljs-built_in">malloc</span>(<span class="hljs-built_in">sizeof</span>(Student));<br>      cout &lt;&lt;<span class="hljs-string">&quot;ps1-&gt;id = &quot;</span> &lt;&lt;psl-&gt;id &lt;&lt;endl;<br>      Student * psl2=<span class="hljs-keyword">new</span> Student;<br>      cout &lt;&lt;<span class="hljs-string">&quot;ps2-&gt;id = &quot;</span> &lt;&lt;psl2-&gt;id &lt;&lt;endl;<br>      <span class="hljs-built_in">free</span>(psl);<br>      <span class="hljs-keyword">delete</span> psl2;<br>&#125;<br></code></pre></td></tr></table></figure>

<ul>
<li>下面的例子告诉我们new出来的东西一定要及时删干净，否则迟早占用完内存。并且内存不能释放两次。</li>
<li>还需要区分被释放的空间和零指针NULL没有任何关系。也就是说NULL也占据了动态空间的。</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cstdlib&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;thread&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">f</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> *p=<span class="hljs-keyword">new</span> <span class="hljs-type">int</span>[<span class="hljs-number">1000</span>];<br>    p[<span class="hljs-number">0</span>]=<span class="hljs-number">2024</span>;<br>    p[<span class="hljs-number">1</span>]=<span class="hljs-number">3</span>;<br>    p[<span class="hljs-number">2</span>]=<span class="hljs-number">22</span>;<br><br>    cout &lt;&lt;<span class="hljs-string">&quot;we are in f() &quot;</span>&lt;&lt;p &lt;&lt;endl;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">while</span>(<span class="hljs-literal">true</span>)<br>    &#123;<br>        <span class="hljs-built_in">f</span>();<br>        this_thread::<span class="hljs-built_in">sleep_for</span>(<span class="hljs-number">1</span>s);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3><span id="const">const</span></h3><ul>
<li>初始化以后不能再更改值，但是可以使用</li>
<li>run-time constants(若在程序跑起来的时候才能确定常量的值，则可能报错)</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-type">const</span> <span class="hljs-type">int</span> class_size = <span class="hljs-number">12</span>;<br><span class="hljs-type">int</span> finalGrade[class_size];<span class="hljs-comment">//ok</span><br><br><span class="hljs-type">int</span> x;<br>cin &gt;&gt; x;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> size = x;<br><span class="hljs-type">double</span> classAverage[size];<span class="hljs-comment">//error</span><br></code></pre></td></tr></table></figure>

<ul>
<li>pointers with const</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-type">int</span> a[]  = &#123;<span class="hljs-number">53</span>,<span class="hljs-number">54</span>,<span class="hljs-number">55</span>&#125;;<br><span class="hljs-type">int</span> * <span class="hljs-type">const</span> p = a;<span class="hljs-comment">//p is const</span><br>*p =<span class="hljs-number">20</span>;<span class="hljs-comment">//ok</span><br>p++;<span class="hljs-comment">//error</span><br><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> *p = a;<span class="hljs-comment">//(*p) is const</span><br>*p = <span class="hljs-number">20</span>; <span class="hljs-comment">//error</span><br>p++;<span class="hljs-comment">//ok</span><br><br><span class="hljs-comment">//再区分一下</span><br><span class="hljs-function">string <span class="hljs-title">s</span><span class="hljs-params">(<span class="hljs-string">&quot;Fred&quot;</span>)</span></span>;<br><span class="hljs-type">const</span> string* p = &amp;s;<span class="hljs-comment">//(*p) is const</span><br>string <span class="hljs-type">const</span>* p = &amp;s;<span class="hljs-comment">//(*p) is const</span><br>string *<span class="hljs-type">const</span> p = &amp;s;<span class="hljs-comment">//p is const</span><br></code></pre></td></tr></table></figure>

<ul>
<li><p>String literals</p>
<ol>
<li>对于初始化的字符串，其实本质上就是初始化的常量字符串，所以不能修改里面的字符。(如果从内存分布的底层逻辑来说，初始化字符串本质上是一个指针指向代码段上方的一个字符串，(并且同样的字符串在代码段只会存一份),所以我们并不能通过更改指针来得到想要的结果)</li>
<li>如果想要修改字符，初始化时应该使用字符数组</li>
<li>当我们使用指针初始化字符串时只能使用const进行修饰，否则会报错。</li>
</ol>
</li>
<li><p>passing addresses</p>
<ol>
<li>当对象较大时可以传递地址(采用指针或者引用)</li>
<li>传参时通常加const修饰，表示该参数不会被修改</li>
</ol>
</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Student</span>&#123;<br>    <span class="hljs-type">int</span> id;<br>    <span class="hljs-type">char</span> address[<span class="hljs-number">1000</span>];<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">foo</span><span class="hljs-params">(<span class="hljs-type">const</span> Student * ps)</span></span><br><span class="hljs-function"></span>&#123;<br>    cout &lt;&lt; ps-&gt;id &lt;&lt;endl;<br>    cout &lt;&lt; (*ps).id &lt;&lt;endl;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">bar</span><span class="hljs-params">(<span class="hljs-type">const</span> Student &amp;s)</span></span><br><span class="hljs-function"></span>&#123;<br>    cout &lt;&lt; s.id &lt;&lt;endl;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    Student s;<br>    s.id=<span class="hljs-number">2</span>;<br>    <span class="hljs-built_in">foo</span>(&amp;s);<br>    <span class="hljs-built_in">bar</span>(s);<br>&#125;<br></code></pre></td></tr></table></figure>

<h2><span id="week-5class">week 5–class</span></h2><h3><span id="class">class</span></h3><h3><span id="objects">objects</span></h3><ul>
<li>objects &#x3D; attributes+services</li>
</ul>
<h3><span id="object-vs-class">object vs class</span></h3><ul>
<li>objects<ul>
<li>Represent things,events</li>
<li>Respond to messages at run-time</li>
</ul>
</li>
<li>Classes<ul>
<li>Define properties of instances</li>
<li>Act like native-types in C++</li>
</ul>
</li>
</ul>
<h3><span id="编译单元">编译单元</span></h3><ul>
<li>一个cpp文件就是一个编译单元</li>
<li>header&#x3D;interface,在里面存放函数的签名以及全局变量的定义，而具体的实现都在cpp文件中完成。</li>
<li>并且同一个变量的定义只能出现在同一个编译单元。</li>
</ul>
<h3><span id="构造函数">构造函数</span></h3><ul>
<li>构造函数是类对象初始化的一部分，当对象被创建时，构造函数被调用。</li>
<li>需要注意的是构造函数时可以有参数的，这种情况下创建对象时需要附加参数。</li>
</ul>
<h3><span id="struct中的静态变量">struct中的静态变量</span></h3><p>静态变量与普通成员变量的区别<br>特性 静态变量 (static) 普通成员变量<br>生命周期 整个程序运行期间 实例的生命周期<br>存储位置 全局数据区 实例的内存空间<br>共享性 所有实例共享 每个实例独立<br>访问方式 类名或实例访问 只能通过实例访问<br>初始化 必须在类外初始化 可以在构造函数中初始化</p>
<h3><span id="inline函数">inline函数</span></h3><ul>
<li>inline函数就是将函数的实现直接嵌入到调用它的地方，从而达到减少函数调用开销的目的。</li>
<li>而在class中，如果函数主体放置在class中，那么这个函数就是inline函数。而inline函数如果放置在一个.h头文件中，并不会引起重定义的问题。</li>
</ul>
<h2><span id="week6composition-and-inheritance">week6–composition and inheritance</span></h2><h3><span id="composition">composition</span></h3><h4><span id="组合的概念">组合的概念</span></h4><ul>
<li><p>它通过将一个类的对象作为另一个类的成员变量来实现。相比于继承，组合强调“拥有关系”而非“是一种”。</p>
</li>
<li><p>这种对象我们也叫做嵌入式对象</p>
<ul>
<li>嵌入式对象都会被初始化，如果没有显式初始化，则调用默认构造函数。但如果没有默认构造函数，就必须在现在的类的初始化列表中提供参数进行显式初始化。</li>
<li>如果存在多个嵌入式对象，嵌入式对象的构造顺序由初始化顺序决定，而不会受到初始化列表顺序影响。</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span> &#123;<br> <span class="hljs-keyword">public</span>:<br>  <span class="hljs-built_in">A</span>(<span class="hljs-type">int</span> x) &#123; &#125;  <span class="hljs-comment">// 没有默认构造函数</span><br>      &#125;;<br><br> <span class="hljs-keyword">class</span> <span class="hljs-title class_">B</span> &#123;<br> <span class="hljs-keyword">private</span>:<br>  A a;<br> <span class="hljs-keyword">public</span>:<br>  <span class="hljs-built_in">B</span>() : <span class="hljs-built_in">a</span>(<span class="hljs-number">42</span>) &#123; &#125;  <span class="hljs-comment">// 必须显式初始化</span><br>  &#125;;<br></code></pre></td></tr></table></figure></li>
</ul>
<h3><span id="inheritance">inheritance</span></h3><h4><span id="继承的概念">继承的概念</span></h4><ul>
<li>它是类与类之间的关系，一个类可以继承另一个类。继承关系是“是”的关系。</li>
</ul>
<h4><span id="继承的优势">继承的优势</span></h4><ul>
<li>避免代码重复</li>
<li>重复利用代码</li>
<li>可维护性</li>
<li>可扩展性</li>
</ul>
<h4><span id="继承的示例以及访问控制">继承的示例以及访问控制</span></h4><blockquote>
<p>example</p>
</blockquote>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br> <br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br> <br><span class="hljs-comment">// 基类</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Shape</span> <br>&#123;<br>   <span class="hljs-keyword">public</span>:<br>      <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">setWidth</span><span class="hljs-params">(<span class="hljs-type">int</span> w)</span></span><br><span class="hljs-function">      </span>&#123;<br>         width = w;<br>      &#125;<br>      <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">setHeight</span><span class="hljs-params">(<span class="hljs-type">int</span> h)</span></span><br><span class="hljs-function">      </span>&#123;<br>         height = h;<br>      &#125;<br>   <span class="hljs-keyword">protected</span>:<br>      <span class="hljs-type">int</span> width;<br>      <span class="hljs-type">int</span> height;<br>&#125;;<br> <br><span class="hljs-comment">// 派生类</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Rectangle</span>: <span class="hljs-keyword">public</span> Shape<br>&#123;<br>   <span class="hljs-keyword">public</span>:<br>      <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">getArea</span><span class="hljs-params">()</span></span><br><span class="hljs-function">      </span>&#123; <br>         <span class="hljs-keyword">return</span> (width * height); <br>      &#125;<br>&#125;;<br> <br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span></span><br><span class="hljs-function"></span>&#123;<br>   Rectangle Rect;<br> <br>   Rect.<span class="hljs-built_in">setWidth</span>(<span class="hljs-number">5</span>);<br>   Rect.<span class="hljs-built_in">setHeight</span>(<span class="hljs-number">7</span>);<br> <br>   <span class="hljs-comment">// 输出对象的面积</span><br>   cout &lt;&lt; <span class="hljs-string">&quot;Total area: &quot;</span> &lt;&lt; Rect.<span class="hljs-built_in">getArea</span>() &lt;&lt; endl;<br> <br>   <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<ul>
<li><p>成员变量的访问权限<br><img data-fancybox="gallery" data-sizes="auto" data-src="/./adsphoto/oop1.png" alt="oop1" class="lazyload"></p>
</li>
<li><p>继承类型</p>
<ul>
<li>当一个类派生自基类，该基类可以被继承为 public、protected 或 private 几种类型</li>
<li>公有继承（public）：当一个类派生自公有基类时，基类的公有成员也是派生类的公有成员，基类的保护成员也是派生类的保护成员，基类的私有成员不能直接被派生类访问，但是可以通过调用基类的公有和保护成员来访问。</li>
<li>保护继承（protected）： 当一个类派生自保护基类时，基类的公有和保护成员将成为派生类的保护成员。</li>
<li>私有继承（private）：当一个类派生自私有基类时，基类的公有和保护成员将成为派生类的私有成员。</li>
</ul>
</li>
<li><p>派生类能够继承什么呢？</p>
<ul>
<li>一个派生类继承了所有的基类方法，但下列情况除外：</li>
<li>基类的构造函数、析构函数和拷贝构造函数。</li>
<li>基类的重载运算符。</li>
<li>基类的友元函数</li>
</ul>
</li>
</ul>
<h2><span id="week8">week8</span></h2><h3><span id="拷贝构造函数与赋值函数">拷贝构造函数与赋值函数</span></h3><ul>
<li>总结，析构函数，拷贝构造函数，赋值操作符这三个函数如果系统生成有误，那么我们自己需要书写</li>
<li>通常涉及指针操作时，此时系统自动生成的函数会存在问题，就如同下面的例子</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;cstring&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Person</span> &#123;<br>    string name;<br>    <span class="hljs-built_in">Person</span>(<span class="hljs-type">const</span> <span class="hljs-type">char</span> *s):<span class="hljs-built_in">name</span>(s)&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;Person()&quot;</span>&lt;&lt;endl;<br>    &#125;<br>    <span class="hljs-built_in">Person</span>(<span class="hljs-type">const</span> Person&amp; other)<br>    &#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;Person(&amp;)&quot;</span>&lt;&lt;endl;<br>    &#125;<br>    <span class="hljs-comment">//char * name;</span><br>    <span class="hljs-comment">/*string name;//这种情况下不需要单独写拷贝构造函数</span><br><span class="hljs-comment">    Person(const char *s):name(s)&#123;&#125;*/</span><br>    <span class="hljs-comment">/*void init(const char* s)</span><br><span class="hljs-comment">    &#123;</span><br><span class="hljs-comment">      name = new char[strlen(s)+1];</span><br><span class="hljs-comment">        strcpy(name,s);</span><br><span class="hljs-comment">    &#125;</span><br><span class="hljs-comment">    Person(const char* s)</span><br><span class="hljs-comment">    &#123;</span><br><span class="hljs-comment">        init(s);</span><br><span class="hljs-comment">    &#125;</span><br><span class="hljs-comment">    Person(const Person&amp; other)&#123;</span><br><span class="hljs-comment">        init(other.name);</span><br><span class="hljs-comment">        cout&lt;&lt;&quot;Person(&amp;)&quot;&lt;&lt;endl;</span><br><span class="hljs-comment">    &#125;</span><br><span class="hljs-comment">    ~Person()&#123;</span><br><span class="hljs-comment">        delete [] name;</span><br><span class="hljs-comment">    &#125;</span><br><span class="hljs-comment">    Person&amp; operator=(const Person&amp; other)</span><br><span class="hljs-comment">    &#123;</span><br><span class="hljs-comment">        //name=other.name;这是编译器自动书写的，但是会发生内存泄漏，原来的不会进行析构操作</span><br><span class="hljs-comment">        //但是如果出现p2=p2的赋值操作仍然可能出现报错，我们进行如下修改</span><br><span class="hljs-comment">        if(this!=&amp;other)&#123;</span><br><span class="hljs-comment">        delete []name;</span><br><span class="hljs-comment">        init(other.name);</span><br><span class="hljs-comment">        &#125;</span><br><span class="hljs-comment">        cout&lt;&lt;&quot;Oprator=()&quot;&lt;&lt;endl;</span><br><span class="hljs-comment">        return *this;</span><br><span class="hljs-comment">    &#125;*/</span><br>&#125;;<br><span class="hljs-function">Person <span class="hljs-title">foo</span><span class="hljs-params">(Person p)</span></span>&#123;<br>    cout&lt;&lt;<span class="hljs-string">&quot;foo()&quot;</span>&lt;&lt;endl;<br>    <span class="hljs-keyword">return</span> p;<span class="hljs-comment">//拷贝构造函数被调用</span><br>&#125;<br><span class="hljs-function">Person <span class="hljs-title">bar</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span>* s)</span></span><br><span class="hljs-function"></span>&#123;<br>    cout&lt;&lt;<span class="hljs-string">&quot;bar()&quot;</span>&lt;&lt;endl;<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Person</span>(s);<span class="hljs-comment">//作为临时值不需要进行拷贝构造</span><br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-comment">/*Person p1(&quot;Trump&quot;);</span><br><span class="hljs-comment">    Person p2=p1;//在编译器自己生成的拷贝函数下，copy以后两个对象都是这块内存的拥有者</span><br><span class="hljs-comment">    //这种需要我们自己写的拷贝函数的情况大多存在于析构函数也需要我们自己写时或者使用指针时</span><br><span class="hljs-comment">    /*p2=p1;//这个操作是赋值操作，并不是拷贝构造</span><br><span class="hljs-comment">    cout&lt;&lt; (void*)p1.name&lt;&lt;endl;</span><br><span class="hljs-comment">    cout&lt;&lt; (void*)p2.name&lt;&lt;endl;*/</span><br>    Person p1=<span class="hljs-built_in">foo</span>(<span class="hljs-string">&quot;Trump&quot;</span>);<br>    cout&lt;&lt;<span class="hljs-string">&quot;--------&quot;</span>&lt;&lt;endl;<br>    Person p2=<span class="hljs-built_in">bar</span>(<span class="hljs-string">&quot;Biden&quot;</span>);<br><br>&#125;<br></code></pre></td></tr></table></figure>

<h3><span id="在容器中的拷贝函数">在容器中的拷贝函数</span></h3><ul>
<li>因为我们的vector在不断扩容(在vector库中定义的是每次扩容两倍)，所以会存在额外的copy操作，如果我们指定vector大小就可以避免额外的copy操作产生</li>
<li>如果我们使用emplace_back，直接在容器内部构造对象就可以避免额外copy</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Point</span>&#123;<br>    <span class="hljs-built_in">Point</span>(<span class="hljs-type">int</span> x,<span class="hljs-type">int</span> y):<span class="hljs-built_in">x</span>(x),<span class="hljs-built_in">y</span>(y) &#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;Point(int,int)&quot;</span>&lt;&lt;endl;<br>    &#125;<br>    <span class="hljs-built_in">Point</span>(<span class="hljs-type">const</span> Point&amp; p):<span class="hljs-built_in">x</span>(p.x),<span class="hljs-built_in">y</span>(p.y)&#123;<br>        cout&lt;&lt;<span class="hljs-string">&quot;copy a point&quot;</span>&lt;&lt;endl;<br>    &#125;<br>    <span class="hljs-type">int</span> x,y;<br>&#125;;<br>ostream&amp; <span class="hljs-keyword">operator</span>&lt;&lt;(ostream&amp; out,<span class="hljs-type">const</span> Point&amp; p)&#123;<br>    <span class="hljs-keyword">return</span> out&lt;&lt;<span class="hljs-string">&quot;(&quot;</span>&lt;&lt;p.x&lt;&lt;<span class="hljs-string">&quot;,&quot;</span>&lt;&lt;p.y&lt;&lt;<span class="hljs-string">&quot;)&quot;</span>;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>vector&lt;Point&gt; pts;<br>pts.<span class="hljs-built_in">push_back</span>(<span class="hljs-built_in">Point</span>(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>));<br>pts.<span class="hljs-built_in">push_back</span>(<span class="hljs-built_in">Point</span>(<span class="hljs-number">3</span>,<span class="hljs-number">4</span>));<br>pts.<span class="hljs-built_in">push_back</span>(<span class="hljs-built_in">Point</span>(<span class="hljs-number">5</span>,<span class="hljs-number">6</span>));<br><span class="hljs-keyword">for</span>(<span class="hljs-type">const</span> Point&amp; p:pts)<br>    cout&lt;&lt;p&lt;&lt;endl;<br>&#125;<br></code></pre></td></tr></table></figure>

<h2><span id="homework-explanation">homework explanation</span></h2><h3><span id="hw35">hw3.5</span></h3><blockquote>
<p>hw3.5,write the output of the following code</p>
</blockquote>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">X</span> &#123;<br>    <span class="hljs-built_in">X</span>() &#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;X::X()&quot;</span> &lt;&lt; std::endl;<br>    &#125;<br>    ~<span class="hljs-built_in">X</span>() &#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;X::~X()&quot;</span> &lt;&lt; std::endl;<br>    &#125;<br>&#125;;<br><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Y</span> &#123;<br>    <span class="hljs-built_in">Y</span>() &#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;Y::Y()&quot;</span> &lt;&lt; std::endl;<br>    &#125;<br>    ~<span class="hljs-built_in">Y</span>() &#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;Y::~Y()&quot;</span> &lt;&lt; std::endl;<br>    &#125;<br>&#125;;<br><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Parent</span> &#123;<br>    <span class="hljs-built_in">Parent</span>() &#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;Parent::Parent()&quot;</span> &lt;&lt; std::endl;<br>    &#125;<br>    ~<span class="hljs-built_in">Parent</span>() &#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;Parent::~Parent()&quot;</span> &lt;&lt; std::endl;<br>    &#125;<br>    X x;<br>&#125;;<br><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Child</span> : <span class="hljs-keyword">public</span> Parent &#123;<br>    <span class="hljs-built_in">Child</span>() &#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;Child::Child()&quot;</span> &lt;&lt; std::endl;<br>    &#125;<br>    ~<span class="hljs-built_in">Child</span>() &#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;Child::~Child()&quot;</span> &lt;&lt; std::endl;<br>    &#125;<br>    Y y;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    Child c;<br>&#125;<br></code></pre></td></tr></table></figure>

<ul>
<li>解释：这道题目主要考察子类和父类的构造顺序，以及对于一个结构体结构体内部元素的构造与整个结构体的构造顺序。<br>我们在main函数中构造一个Child对象，首先我们要构造基类对象，即构造Parent，但是又要首先将X构造完毕，才能成功构造Parent，构造完成基类以后，对于派生类，先构造自己的成员变量Y，再成功构造派生类对象。最后的析构顺序与构造顺序相反。</li>
</ul>
<h3><span id="hw45">hw4.5</span></h3><blockquote>
<p>hw4.5,write the output of the following code</p>
</blockquote>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span><br>&#123;<br><span class="hljs-keyword">public</span>:<br>  <span class="hljs-built_in">A</span>(<span class="hljs-type">int</span> i) : <span class="hljs-built_in">mi</span>(i) &#123;&#125;<br>  <span class="hljs-built_in">A</span>(<span class="hljs-type">const</span> A&amp; rhs) : <span class="hljs-built_in">mi</span>(rhs.mi)<br>  &#123;<br>    cout &lt;&lt; <span class="hljs-string">&quot;A::A(&amp;)&quot;</span> &lt;&lt; endl;<br>  &#125;<br>  A&amp; <span class="hljs-keyword">operator</span>=(<span class="hljs-type">const</span> A&amp;rhs)<br>  &#123;<br>    mi = rhs.mi;<br>    cout &lt;&lt; <span class="hljs-string">&quot;A::operator=()&quot;</span> &lt;&lt; endl;<br>    <span class="hljs-keyword">return</span> *<span class="hljs-keyword">this</span>;<br>  &#125;<br>  <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">f</span><span class="hljs-params">()</span></span><br><span class="hljs-function">  </span>&#123;<br>    cout &lt;&lt; <span class="hljs-string">&quot;A::f(), &quot;</span> &lt;&lt; mi &lt;&lt; endl;<br>  &#125;<br><span class="hljs-keyword">protected</span>:<br>  <span class="hljs-type">int</span> mi;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">B</span> : <span class="hljs-keyword">public</span> A<br>&#123;<br><span class="hljs-keyword">public</span>:<br>  <span class="hljs-built_in">B</span>(<span class="hljs-type">int</span> i, <span class="hljs-type">int</span> j) : <span class="hljs-built_in">A</span>(i), <span class="hljs-built_in">mj</span>(j) &#123;&#125;<br>  <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">f</span><span class="hljs-params">()</span> <span class="hljs-keyword">override</span></span><br><span class="hljs-function">  </span>&#123;<br>    cout &lt;&lt; <span class="hljs-string">&quot;B::f(), &quot;</span> &lt;&lt; mi &lt;&lt; <span class="hljs-string">&quot;, &quot;</span> &lt;&lt; mj &lt;&lt; endl;<br>  &#125;<br><span class="hljs-keyword">private</span>:<br>  <span class="hljs-type">int</span> mj;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>  <span class="hljs-function">A <span class="hljs-title">a1</span><span class="hljs-params">(<span class="hljs-number">1</span>)</span></span>;<br>  <span class="hljs-function">B <span class="hljs-title">b</span><span class="hljs-params">(<span class="hljs-number">3</span>,<span class="hljs-number">4</span>)</span></span>;<br><br>  A&amp; ra = b;<br>  ra.<span class="hljs-built_in">f</span>();<br>  ra = a1;<br>  ra.<span class="hljs-built_in">f</span>();<br><br>  A a2 = b;<br>  a2.<span class="hljs-built_in">f</span>();<br>&#125;<br></code></pre></td></tr></table></figure>

<ul>
<li>解释：<ul>
<li>从宏观来看，我们首先定义了基类A，然后定义了子类B，B继承自A。</li>
<li>对A类进行分析：<ul>
<li>A类中有一个构造函数，输入i赋值为mi中。</li>
<li>A类中有一个拷贝构造函数，输入rhs赋值给mi中。</li>
<li>还定义了一个赋值操作符，输入rhs赋值给mi中。</li>
<li>还定义了一个f虚函数，输出mi的值。</li>
</ul>
</li>
<li>对B类进行分析：<ul>
<li>B类中有一个构造函数，输入i和j分别赋值给mi和mj中。</li>
<li>还定义了一个f函数，输出mi和mj的值。</li>
</ul>
</li>
<li>分析主程序：首先定义两个对象a1和b;然后我们定义A类型的ra引用b，然而b是B类型发生向上转型(此时，ra 只能看到 A 类的接口部分（即 mi 和 f() 方法），而无法直接访问 B 类特有的成员变量 mj)，但是在调用虚函数时会调用实际对象的派生类的方法，所以输出B::f(), 3, 4;接下来调用A的赋值操作符，则mi被更新为1，并输出A::operator&#x3D;(),再次调用虚函数，输出B::f(), 1, 4;我们此时再调用A类中的拷贝构造函数(其实不用自己书写，编译器已经自动生成了)，输出A::A(&amp;),再调用A的f函数，输出A::f(), 1;</li>
</ul>
</li>
</ul>

	</article>

	 
    <div class="kira-post-copyright">
        <strong>本文作者：</strong>Lane<br>
        <strong>本文链接：</strong><a href="https://lakerswillwin.github.io/2025/01/14/oop/" title="https:&#x2F;&#x2F;lakerswillwin.github.io&#x2F;2025&#x2F;01&#x2F;14&#x2F;oop&#x2F;" target="_blank" rel="noopener">https:&#x2F;&#x2F;lakerswillwin.github.io&#x2F;2025&#x2F;01&#x2F;14&#x2F;oop&#x2F;</a><br>
        
            <strong>版权声明：</strong>本文采用 <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/cn/deed.zh" target="_blank">CC BY-NC-SA 3.0 CN</a> 协议进行许可
        
    </div>

  
	<div class="kira-post-nav">
		<nav class="post-nav">
			  
			<!-- 先找到与当前文字相同的目录 -->
			                                 
			<!-- 在找到当前文章所在的 index -->
			                                        
			<!-- 上一篇文章 -->
			<div class="old">
				<span>上一章</span>
				<a href="/2024/10/24/ads1/"> ads知识</a>
			</div>
			       
			<!-- 下一篇文章 -->
			<div class="new">
				<span>下一章</span>
				<a href="/2025/02/17/database/"> Database system</a>
			</div>
			                                                
		</nav>
	</div>
	
	<div class="kira-post-meta kira-rainbow">
		
			<a class="kirafont icon-container-fill -link" href="/categories/cs%E8%AF%BE%E7%A8%8B/">cs课程</a>
		
		
			<a class="kirafont icon-tag-fill -none-link" href="/tags/C/" rel="tag">C++</a>
		
	</div>
	
	<div class="kira-post-footer">
		

		
	</div>
	
</div>

				</div>
			</div>
			<div class="kira-right-column">
	<a onclick="document.querySelector('#kira-top-header').scrollIntoView({behavior: 'smooth'});" class="kira-backtotop" aria-label="回到顶部" title="回到顶部">
		<button class="mdui-fab mdui-ripple">
			<i class="kirafont icon-caret-up"></i>
		</button>
	</a>
</div>

		</div>
	</body>
</html>
